<!DOCTYPE html>
<html lang="sv-SE" class="no-js no-svg">
<head>
<meta charset="UTF-8">
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<style>
    .table {max-width:2em;}
    .table td {padding:0; border:0;}
    .table-sm td {padding:0.1em; }
    p.btn {width:3em;}
</style>
</head>
<body>
    <div class="container"> 
            <div id="demo"></div>
            <div class="p-3">
                    <button type="button" id="formerMonth" class="btn btn-info">< Previous Month</button> <button type="button" id="nextMonth" class="btn btn-info">Next Month ></button>
            </div>            
        <div id="calendarContainer"></div>

    </div>

<script>

   /*
Name: The Bookmaker
Developer: Steffo Dimfelt, 2018
Mail: steffo.dimfelt@gmail.com
Sluggo The Bookmaker uses jQuery and ECMA 6
*/

class dayButtons {
    constructor(day){
    this._day = day;
    }

    get day(){
     //   console.log("get")
     if (this._day<=9){this._day="0"+this._day}
        return this._day;
    }

    set day(dayValue){
        this._day = dayValue;
     //   console.log(_day);
    }

}//END: class Buttons

class monthConvert{
    constructor(month){
        this._month = month;
    }

    get month()
    {
        let monthOut = ["Januari", "Februari", "Mars", "April", "Maj", "Juni", "Juli", "Augusti", "September", "Oktober", "November", "Decembar"];
        return monthOut[this._month];
    }
    set month(monthValue)
    {
        this._month = monthValue;
    }


}

function getdaysInThisMonth(m, y) {

    // if month is Sept, Apr, Jun, Nov return 30 days
    if( /8|3|5|10/.test( m ) ) return 30;

    // if month is not Feb return 31 days
    if( m != 1 ) return 31;

    // To get this far month must be Feb ( 1 )
    // if the year is a leap year then Feb has 29 days
    if( ( y % 4 == 0 && y % 100 != 0 ) || y % 400 == 0 ) return 29;

    // Not a leap year. Feb has 28 days.
    return 28;
}

function mappingTwoMonths(changeCurrentMonth)
{

let date = new Date();
let addToMonth = changeCurrentMonth;
let currentMonth = date.getMonth()+addToMonth;
let currentYear = date.getFullYear();
let nextMonth = currentMonth+1;
let daysOfCurrentMonth = getdaysInThisMonth (currentMonth, currentYear);
let daysOfNextMonth = getdaysInThisMonth (nextMonth, currentYear);
let firstDayCurrentMonth = new Date(currentYear, currentMonth, 1);
let firstDayNextMonth = new Date(currentYear, nextMonth, 1);

// let allOut="";
// allOut += "Detta år:"+date+"<br>";
 //allOut += "Denna månad nr:"+currentMonth+"<br>";
// allOut += "Nästa månad nr:"+nextMonth+"<br>";
// allOut += "Dagar Denna månad:"+ daysOfCurrentMonth +"<br>";
// allOut += "Dagar nästa månad:"+ daysOfNextMonth +"<br>";
// allOut += "Första dagen denna månad "+ firstDayCurrentMonth +"<br>";
// allOut += "Första dagen denna månad "+ firstDayCurrentMonth.getDay() +"<br>";
// allOut += "Första dagen nästa månad "+ firstDayNextMonth +"<br>";
// allOut += "Första dagen nästa månad "+ firstDayNextMonth.getDay() +"<br>";
// document.getElementById("demo").innerHTML = allOut;


$("#calendarContainer").html(CalendarMapping(daysOfCurrentMonth,firstDayCurrentMonth.getDay())+CalendarMapping(daysOfNextMonth,firstDayNextMonth.getDay()));

}//END: mappingTwoMonths

function CalendarMapping(daysInThisMonth,firstDay)
{

// Mapping calendar
let ii =1;
let calendarMapping = "<table class='table table-sm m-0' >";

//Mapping empty days at beginning of month
let emptyStartDays="";
function mapTD(tdVal){for (x=1;x<tdVal;x++)emptyStartDays+="<td></td>";}
switch (firstDay)
{
    case 1: ii=1;mapTD(ii);break;
    case 2: ii=2;mapTD(ii);break;
    case 3: ii=3;mapTD(ii);break;
    case 4: ii=4;mapTD(ii);break;
    case 5: ii=5;mapTD(ii);break;
    case 6: ii=6;mapTD(ii);break;
    case 0: ii=7;mapTD(ii);break;
}

//Loop through calendardays
for (i=1;i<=daysInThisMonth;i++) 
{
  let thisDay = new dayButtons(i);
    //console.log("ii "+ii)
    if (ii==1){ calendarMapping += "<tr >";}
        if (emptyStartDays!=""){calendarMapping+=emptyStartDays;emptyStartDays=""}
    calendarMapping += "<td style='text-align:center; '><button type='button' class='btn btn-primary m-0' >"+thisDay.day+"</button></td>";
    if (ii>=7){ calendarMapping += "</tr>";}
    if (ii<=6){ii++;}else{ii=1;}   
}
calendarMapping += "</table>";

return calendarMapping;
}//END: Function CalendarMapping

/* Körschema
1. Gör en funktion som mappar upp en månad [CHECK]
2. Använd den funktion för att köra två månader. [CHECK]
3. De två månaderna ska läggas in i div [CHECK]
4. Ta reda på nummer på första dagen i denna månad, för att kunna veta vilken dag nästa börjar på [CHECK]
5. Fånga upp sista dagen i första månaden [CHECK]
6.  0 om första dagen i nästa månad är en söndag [CHEKC]
7. Mappa upp två månader efter varandra [CHECK]
8. Fel när man byter månader. Dagarna synkar inte. [CHECK]

*/

$(function(){
    var setNewMonth = 0;
mappingTwoMonths(setNewMonth)

$("#formerMonth").click(function(){
   
    setNewMonth<=0? setNewMonth=0: setNewMonth --;
    mappingTwoMonths(setNewMonth)
});
$("#nextMonth").click(function(){
    setNewMonth ++;
    mappingTwoMonths(setNewMonth)
});
})


</script>  

</body>
</html>